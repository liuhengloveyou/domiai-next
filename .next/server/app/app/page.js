(()=>{var e={};e.id=466,e.ids=[466],e.modules={408:(e,t,a)=>{Promise.resolve().then(a.bind(a,44289))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20176:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>O,dynamic:()=>Q});var r=a(60554),s=a(60563),i=a(71726),n=a(65656),o=a(40446),c=a(45789),d=a(99768),l=a(41359),p=a(13529),u=a(90263),m=a(71885),h=a(93896),x=a(75646),g="Switch",[v,y]=(0,p.A)(g),[b,f]=v(g),j=s.forwardRef((e,t)=>{let{__scopeSwitch:a,name:i,checked:n,defaultChecked:o,required:c,disabled:p,value:m="on",onCheckedChange:h,form:g,...v}=e,[y,f]=s.useState(null),j=(0,l.s)(t,e=>f(e)),k=s.useRef(!1),w=!y||g||!!y.closest("form"),[S=!1,P]=(0,u.i)({prop:n,defaultProp:o,onChange:h});return(0,r.jsxs)(b,{scope:a,checked:S,disabled:p,children:[(0,r.jsx)(x.sG.button,{type:"button",role:"switch","aria-checked":S,"aria-required":c,"data-state":N(S),"data-disabled":p?"":void 0,disabled:p,value:m,...v,ref:j,onClick:(0,d.m)(e.onClick,e=>{P(e=>!e),w&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),w&&(0,r.jsx)(C,{control:y,bubbles:!k.current,name:i,value:m,checked:S,required:c,disabled:p,form:g,style:{transform:"translateX(-100%)"}})]})});j.displayName=g;var k="SwitchThumb",w=s.forwardRef((e,t)=>{let{__scopeSwitch:a,...s}=e,i=f(k,a);return(0,r.jsx)(x.sG.span,{"data-state":N(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})});w.displayName=k;var C=e=>{let{control:t,checked:a,bubbles:i=!0,...n}=e,o=s.useRef(null),c=(0,m.Z)(a),d=(0,h.X)(t);return s.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==a&&t){let r=new Event("click",{bubbles:i});t.call(e,a),e.dispatchEvent(r)}},[c,a,i]),(0,r.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:o,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function N(e){return e?"checked":"unchecked"}var S=a(83481);function P({className:e,...t}){return(0,r.jsx)(j,{"data-slot":"switch",className:(0,S.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,r.jsx)(w,{"data-slot":"switch-thumb",className:(0,S.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var A=a(97110),q=a(70400),V=a(63436),_=a(10187),E=a(26099),K=a(4273),R=a(57480),I=a(79169),T=a(37784),D=a(29203),W=a(63490),z=a(43283),F=a(79449),G=a(13989),J=a(86244);let Q="force-dynamic",Z=[{code:"zh-CN",nameKey:"chinese"},{code:"en-US",nameKey:"english"},{code:"ja-JP",nameKey:"japanese"},{code:"ko-KR",nameKey:"korean"},{code:"es-ES",nameKey:"spanish"},{code:"fr-FR",nameKey:"french"},{code:"ru-RU",nameKey:"russian"},{code:"it-IT",nameKey:"italian"},{code:"pt-PT",nameKey:"portuguese"},{code:"de-DE",nameKey:"german"},{code:"vi-VN",nameKey:"vietnamese"},{code:"uk-UA",nameKey:"ukrainian"},{code:"tr-TR",nameKey:"turkish"},{code:"id-ID",nameKey:"indonesian"},{code:"ar-SA",nameKey:"arabic"}];function O(){let{t:e}=(0,I.o)(),[t,a]=(0,s.useState)(""),[d,l]=(0,s.useState)("en-US"),[p,u]=(0,s.useState)(1),[m,h]=(0,s.useState)(!1),[x,g]=(0,s.useState)(!1),[v]=(0,s.useState)("aws"),[y]=(0,s.useState)(null),[b,f]=(0,s.useState)(!1),{data:j}=(0,F.useSession)(),[k,w]=(0,s.useState)(null),[C,N]=(0,s.useState)(!1),S=(0,G.s)(),Q=async()=>{if(!C)try{N(!0);let a=!1;try{if(!j?.user)return;let r=await fetch("/api/user/plan");if(r.ok){let{permanentQuota:e,temporaryQuota:s,usedCharacters:i,quotaExpiry:n}=(await r.json()).characterQuota;if(e+(n&&new Date(n)>new Date?s:0)-i<t.length)return;a=!0}else console.error(e("quotaCheckFailed"))}catch(t){console.error(e("quotaCheckError"),t)}if(a)try{(await fetch("/api/user/update-quota",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usedCharacters:t.length})})).ok?console.log(`字符配额更新成功，使用字符数: ${t.length}`):console.error(e("updateQuotaFailed"))}catch(t){console.error(e("updateQuotaError"),t)}}catch(t){console.error(e("speechSynthesisError"),t)}finally{N(!1)}},O=async()=>{try{if(!t||!k||!j?.user)return}catch(t){console.error(e("downloadError"),t)}},U=async e=>{let t=e.target.files?.[0];if(t)try{if("text/plain"===t.type||t.name.endsWith(".txt")||t.name.endsWith(".md")){let e=new FileReader;e.onload=e=>{let t=e.target?.result;a(t)},e.readAsText(t)}else"application/pdf"===t.type||t.type.includes("word")||t.name.endsWith(".doc")||t.name.endsWith(".docx")||t.name.endsWith(".rtf")}catch(e){console.error("File upload error:",e)}},B=()=>{y&&(y.audioContext.suspend(),f(!1))},M=()=>{y&&(y.audioContext.resume(),f(!0))};return x?(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)(D.j,{}),(0,r.jsx)("main",{className:"container mx-auto px-4 py-4 md:py-8 space-y-4 md:space-y-8",children:(0,r.jsxs)(q.Zp,{className:"backdrop-blur-sm bg-background/80 border-primary/10 shadow-lg",children:[(0,r.jsx)(q.aR,{className:"border-b border-primary/10 pb-4 md:pb-6 flex justify-center items-center",children:(0,r.jsx)(q.ZB,{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent text-center",children:e("title")})}),(0,r.jsx)(q.Wu,{className:"pt-4 md:pt-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-8",children:[(0,r.jsxs)(q.Zp,{className:"backdrop-blur-sm bg-background/80 border-primary/10 shadow-md",children:[(0,r.jsx)(q.aR,{className:"space-y-1 md:space-y-2",children:(0,r.jsx)(q.ZB,{className:"text-lg md:text-xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:e("serviceSettings")})}),(0,r.jsx)(q.Wu,{className:"space-y-3 md:space-y-4",children:(0,r.jsxs)("div",{className:"space-y-3 md:space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,r.jsx)(A.J,{children:e("speechService")}),(0,r.jsxs)(o.l6,{value:"",children:[(0,r.jsx)(o.bq,{className:"h-9 md:h-10",children:(0,r.jsx)(o.yv,{})}),(0,r.jsxs)(o.gC,{children:[(0,r.jsx)(o.eb,{value:"aws",children:"AWS Polly"}),(0,r.jsx)(o.eb,{value:"minimax",children:"Minimax"}),(0,r.jsx)(o.eb,{value:"openai",children:"OpenAI TTS"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,r.jsx)(A.J,{children:e("selectLanguage")}),(0,r.jsxs)(o.l6,{value:d,onValueChange:e=>{l(e),S.trackEvent("change_language","settings",e)},children:[(0,r.jsx)(o.bq,{className:"h-9 md:h-10",children:(0,r.jsx)(o.yv,{})}),(0,r.jsx)(o.gC,{className:"max-h-[40vh] overflow-y-auto",children:Z.map(t=>(0,r.jsx)(o.eb,{value:t.code,children:e(t.nameKey)},t.code))})]})]}),(0,r.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,r.jsx)(A.J,{children:e("voice")}),d&&(0,r.jsx)(J.E,{languageCode:d,onVoiceSelect:w,selectedVoiceId:k?.id,provider:v})]}),(0,r.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,r.jsx)(A.J,{children:e("wordByWord")}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:m?e("on"):e("off")}),(0,r.jsx)(P,{checked:m,onCheckedChange:h})]})]}),(0,r.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,r.jsxs)(A.J,{children:[e("speed"),": ",p,"x"]}),(0,r.jsx)(c.A,{value:[p],onValueChange:([e])=>u(e),min:.5,max:2,step:.1,className:"py-1"})]})]})})]}),(0,r.jsxs)(q.Zp,{className:"backdrop-blur-sm bg-background/80 border-primary/10 shadow-md",children:[(0,r.jsx)(q.aR,{className:"space-y-1 md:space-y-2",children:(0,r.jsx)(q.ZB,{className:"text-lg md:text-xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:e("readText")})}),(0,r.jsxs)(q.Wu,{className:"space-y-3 md:space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(n.T,{placeholder:e("inputPlaceholder"),className:"min-h-[120px] md:min-h-[200px] bg-background/70 backdrop-blur-sm border-primary/20 focus:border-primary/40 transition-all duration-300 resize-none text-sm md:text-base",value:t}),(0,r.jsxs)("div",{className:"absolute bottom-2 right-2 text-xs text-muted-foreground",children:[t.length," ",e("characters")]})]}),y&&(0,r.jsx)(W.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:"w-full",children:(0,r.jsx)(T.t,{audioContext:y.audioContext,audioSource:y.source,onPause:B,onResume:M,isPlaying:b})}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 md:gap-4",children:[(0,r.jsx)(z.Q,{children:(0,r.jsxs)(i.$,{onClick:Q,className:"flex-1 h-9 md:h-10 text-sm bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 hover:from-blue-600 hover:via-purple-600 hover:to-pink-600 transition-all duration-300",children:[(0,r.jsx)(V.A,{className:"mr-2 h-4 w-4"}),e("readText")]})}),y&&(0,r.jsx)(W.P.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},children:(0,r.jsx)(z.Q,{children:(0,r.jsx)(i.$,{variant:"outline",size:"icon",onClick:b?B:M,className:"h-9 md:h-10 w-9 md:w-10 border-primary/20 hover:border-primary/40",children:b?(0,r.jsx)(_.A,{className:"h-4 w-4"}):(0,r.jsx)(E.A,{className:"h-4 w-4"})})})}),(0,r.jsx)(z.Q,{children:(0,r.jsxs)(i.$,{variant:"outline",onClick:O,className:"flex-1 h-9 md:h-10 text-sm border-primary/20 hover:border-primary/40 hover:bg-primary/5",children:[(0,r.jsx)(K.A,{className:"mr-2 h-4 w-4"}),e("downloadAudio")]})}),(0,r.jsx)(z.Q,{children:(0,r.jsx)(i.$,{variant:"outline",className:"flex-1 h-9 md:h-10 text-sm border-primary/20 hover:border-primary/40 hover:bg-primary/5",asChild:!0,children:(0,r.jsxs)("label",{children:[(0,r.jsx)(R.A,{className:"mr-2 h-4 w-4"}),e("uploadFile"),(0,r.jsx)("input",{type:"file",className:"hidden",accept:".txt,.md",onChange:U})]})})})]})]})]})]})})]})})]}):null}},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},35256:(e,t,a)=>{Promise.resolve().then(a.bind(a,20176))},44152:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>l,routeModule:()=>u,tree:()=>d});var r=a(97448),s=a(81303),i=a(23375),n=a.n(i),o=a(37440),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);a.d(t,c);let d={children:["",{children:["app",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,44289)),"D:\\domiai\\domiai-next\\app\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,91066)),"D:\\domiai\\domiai-next\\app\\app\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,90996))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,49510)),"D:\\domiai\\domiai-next\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,26166)),"D:\\domiai\\domiai-next\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,37056,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,12433,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,90996))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,l=["D:\\domiai\\domiai-next\\app\\app\\page.tsx"],p={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/app/page",pathname:"/app",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},44289:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i,dynamic:()=>s});var r=a(40356);let s=(0,r.registerClientReference)(function(){throw Error("Attempted to call dynamic() from the server but dynamic is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\domiai\\domiai-next\\app\\app\\page.tsx","dynamic"),i=(0,r.registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\domiai\\\\domiai-next\\\\app\\\\app\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\domiai\\domiai-next\\app\\app\\page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91066:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i,dynamic:()=>r,metadata:()=>s});let r="force-dynamic",s={title:"VoiceCanvas Studio - Professional AI Voice Synthesis & Voice Cloning Workspace",description:"Create professional-grade voice content with our advanced AI voice synthesis and cloning studio. Features real-time preview, multi-voice support, precise control over speed, pitch, and personalized voice cloning capabilities.",metadataBase:new URL("https://voicecanvas.org"),icons:{icon:"/favicon.ico",shortcut:"/favicon.ico",apple:"/apple-touch-icon.png",other:{rel:"apple-touch-icon-precomposed",url:"/apple-touch-icon-precomposed.png"}},openGraph:{title:"VoiceCanvas Studio - Professional AI Voice Synthesis & Voice Cloning Workspace",description:"Create professional-grade voice content with our advanced AI voice synthesis and cloning studio. Features real-time preview, multi-voice support, precise control over speed, pitch, and personalized voice cloning capabilities.",url:"https://voicecanvas.org/app",siteName:"VoiceCanvas",locale:"en_US",type:"website",images:[{url:"https://voicecanvas.org/images/studio-og.png",width:1200,height:630,alt:"VoiceCanvas Studio - AI Voice Synthesis & Cloning Platform",type:"image/png"}]},twitter:{title:"VoiceCanvas Studio - Professional AI Voice Synthesis & Voice Cloning Workspace",description:"Create professional-grade voice content with our advanced AI voice synthesis and cloning studio. Features real-time preview, multi-voice support, precise control over speed, pitch, and personalized voice cloning capabilities.",card:"summary_large_image",images:{url:"https://voicecanvas.org/images/studio-og.png",alt:"VoiceCanvas Studio - AI Voice Synthesis & Cloning Platform",width:1200,height:630},creator:"@VoiceCanvas",site:"@VoiceCanvas"},other:{"og:image:secure_url":"https://voicecanvas.org/images/studio-og.png","pinterest-rich-pin":"true","fb:app_id":"","article:author":"https://voicecanvas.org","article:publisher":"https://voicecanvas.org"}};function i({children:e}){return e}},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[395,863,771,727,490,317,956,830,690],()=>a(44152));module.exports=r})();