(()=>{var e={};e.id=347,e.ids=[347],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7863:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s,dynamic:()=>a,metadata:()=>i});let a="force-dynamic",i={title:"AI Voice Cloning - Professional Voice Replication & Customization Service",description:"Clone and customize your voice using advanced AI technology. Support for multiple languages including English, Chinese, Japanese, and Korean. Features real-time preview and personalization options. Perfect for voiceovers, education, and podcasting.",metadataBase:new URL("https://voicecanvas.org"),icons:{icon:"/favicon.ico",shortcut:"/favicon.ico",apple:"/apple-touch-icon.png",other:{rel:"apple-touch-icon-precomposed",url:"/apple-touch-icon-precomposed.png"}},keywords:"voice cloning, AI voiceover, voice synthesis, voice customization, multilingual voiceover, personalized voice, professional voiceover, voice customization service",openGraph:{title:"AI Voice Cloning - Professional Voice Replication & Customization Service",description:"Clone and customize your voice using advanced AI technology. Support for multiple languages including English, Chinese, Japanese, and Korean. Features real-time preview and personalization options.",url:"https://voicecanvas.org/cloning",siteName:"VoiceCanvas",locale:"en_US",type:"website",images:[{url:"https://voicecanvas.org/images/cloning-og.png",width:1200,height:630,alt:"VoiceCanvas Cloning Interface",type:"image/png"}]},twitter:{title:"AI Voice Cloning - Professional Voice Replication & Customization",description:"Clone and customize your voice using advanced AI technology. Supports multiple languages with personalization options and real-time preview.",card:"summary_large_image",images:{url:"/images/cloning-twitter.png",alt:"VoiceCanvas Cloning Interface",width:1200,height:630},creator:"@VoiceCanvas",site:"@VoiceCanvas"},other:{"og:image:secure_url":"https://voicecanvas.org/images/cloning-og.png","pinterest-rich-pin":"true","fb:app_id":"","article:author":"https://voicecanvas.org","article:publisher":"https://voicecanvas.org"}};function s({children:e}){return e}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},12412:e=>{"use strict";e.exports=require("assert")},17724:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(40356).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\domiai\\\\domiai-next\\\\app\\\\cloning\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\domiai\\domiai-next\\app\\cloning\\page.tsx","default")},18844:(e,r,t)=>{"use strict";var a=t(82896);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68571:(e,r,t)=>{Promise.resolve().then(t.bind(t,17724))},74075:e=>{"use strict";e.exports=require("zlib")},74476:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>l});var a=t(97448),i=t(81303),s=t(23375),o=t.n(s),n=t(37440),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(r,c);let l={children:["",{children:["cloning",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,17724)),"D:\\domiai\\domiai-next\\app\\cloning\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,7863)),"D:\\domiai\\domiai-next\\app\\cloning\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,90996))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,49510)),"D:\\domiai\\domiai-next\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,26166)),"D:\\domiai\\domiai-next\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,37056,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,12433,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,90996))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["D:\\domiai\\domiai-next\\app\\cloning\\page.tsx"],p={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/cloning/page",pathname:"/cloning",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},79187:(e,r,t)=>{Promise.resolve().then(t.bind(t,82921))},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},82921:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>V});var a=t(60554),i=t(60563),s=t(71726),o=t(65656),n=t(40446),c=t(45789),l=t(97110),d=t(70400),p=t(57480),u=t(98898);let m=(0,t(57605).A)("mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);var h=t(63436),x=t(10187),g=t(26099),v=t(4273),y=t(79169),f=t(37784),b=t(29203),j=t(63490),w=t(43283),N=t(79449),C=t(13989),k=t(86244),R=t(83481),S=t(18844),E=t(25862);let P=[{code:"zh-CN",nameKey:"chinese"},{code:"en-US",nameKey:"english"},{code:"ja-JP",nameKey:"japanese"},{code:"ko-KR",nameKey:"korean"},{code:"es-ES",nameKey:"spanish"},{code:"fr-FR",nameKey:"french"},{code:"ru-RU",nameKey:"russian"},{code:"it-IT",nameKey:"italian"},{code:"pt-PT",nameKey:"portuguese"},{code:"de-DE",nameKey:"german"},{code:"vi-VN",nameKey:"vietnamese"},{code:"uk-UA",nameKey:"ukrainian"},{code:"tr-TR",nameKey:"turkish"},{code:"id-ID",nameKey:"indonesian"},{code:"ar-SA",nameKey:"arabic"}],A={minimax:1e4};function V(){let{t:e}=(0,y.o)(),[r,t]=(0,i.useState)(""),[V,q]=(0,i.useState)("zh-CN"),[z]=(0,i.useState)(1),[D,I]=(0,i.useState)(!1),[_]=(0,i.useState)(null),[F,K]=(0,i.useState)(!1),{data:U}=(0,N.useSession)(),[T,W]=(0,i.useState)(null),[Z,L]=(0,i.useState)(!1),M=(0,C.s)(),[$,J]=(0,i.useState)(null),[Q,B]=(0,i.useState)(!1),G=(0,i.useRef)(null),[O,X]=(0,i.useState)(!1),[H,Y]=(0,i.useState)(null),ee=(0,S.useRouter)(),er={uploadAudioFirst:e("uploadAudioFirst"),audioUploadRequirements:e("audioUploadRequirements"),loginRequired:e("loginRequired"),loginForCloning:e("loginForCloning"),fetchUserDataError:e("fetchUserDataError"),insufficientCloneCredits:e("insufficientCloneCredits"),buyMoreCredits:e("buyMoreCredits"),startCloningTitle:e("startCloningTitle"),startCloningDesc:e("startCloningDesc"),cloneVoiceFailed:e("cloneVoiceFailed"),invalidVoiceId:e("invalidVoiceId"),cloneSuccess:e("cloneSuccess"),cloneReadyToUse:e("cloneReadyToUse"),cloneError:e("cloneError"),unknownError:e("unknownError"),invalidResponse:e("invalidResponse")||"Invalid response from server"},et={...er,error:e("error"),fetchCloneVoicesError:e("fetchCloneVoicesError"),deleteSuccess:e("deleteSuccess"),cloneVoiceDeleted:e("cloneVoiceDeleted"),deleteCloneVoiceError:e("deleteCloneVoiceError"),recordingComplete:e("recordingComplete"),recordingSaved:(r,t)=>e("recordingSaved",{filename:r,size:t}),startRecordingTitle:e("startRecordingTitle"),startRecordingDesc:e("startRecordingDesc"),microphoneAccessError:e("microphoneAccessError"),clonedVoice:e("clonedVoice")},ea=async()=>{if(!Z)try{L(!0)}catch(r){console.error(e("speechSynthesisError"),r),(0,E.oR)(r instanceof Error?r.message:e("speechError"))}finally{L(!1)}},ei=async()=>{try{if(!r)return void(0,E.oR)(e("pleaseEnterText"));if(!T)return void(0,E.oR)(e("selectVoiceFirst"));if(!U?.user)return}catch(r){console.error(e("downloadError"),r)}},es=async e=>{let r=e.target.files?.[0];if(r)try{if("text/plain"===r.type||r.name.endsWith(".txt")||r.name.endsWith(".md")){let e=new FileReader;e.onload=e=>{let r=e.target?.result;t(r)},e.readAsText(r)}else"application/pdf"===r.type||r.type.includes("word")||r.name.endsWith(".doc")||r.name.endsWith(".docx")||r.name.endsWith(".rtf")}catch(e){console.error("File upload error:",e)}},eo=()=>{_&&(_.audioContext.suspend(),K(!1))},en=()=>{_&&(_.audioContext.resume(),K(!0))},ec=async r=>{let t=r.target.files?.[0];if(t)try{if(!t.type.startsWith("audio/")||t.size>0x1400000)return;let r=new Audio,a=await new Promise((a,i)=>{r.onloadedmetadata=()=>a(r.duration),r.onerror=()=>i(Error(e("audioDurationError"))),r.src=URL.createObjectURL(t)});if(a<10||a>300)return void URL.revokeObjectURL(r.src);J(t),URL.revokeObjectURL(r.src)}catch(r){console.error(e("uploadError"),r)}},el=async()=>{try{let e=await fetch("/api/voice/cloned-voices");if(401===e.status||404===e.status)return;let r=await e.json();Array.isArray(r)}catch(e){}},ed=async()=>{if($){if(!U?.user)return void ee.push("/auth/login");try{let e=await fetch("/api/user/plan");if(!e.ok)throw Error(er.fetchUserDataError);let r=await e.json();if(!r.cloneQuota||r.cloneQuota.remaining_clones<=0)return void ee.push("/pricing?type=clone")}catch(e){console.error(er.fetchUserDataError,e);return}try{let e;B(!0);let r=new FormData;r.append("audio",$);let t=await fetch("/api/voice/clone",{method:"POST",body:r});if(!t.ok){let e=er.cloneVoiceFailed;try{let r=t.headers.get("content-type");if(r&&r.includes("application/json")){let r=await t.json();r.error&&(e=r.error)}else{let e=await t.text();console.error("非JSON错误响应:",e.substring(0,200)+"...")}}catch(e){console.error("解析错误响应失败:",e)}throw Error(e)}try{e=await t.json()}catch(e){throw console.error("解析JSON响应失败:",e),Error(er.invalidResponse)}if(!e.voiceId)throw Error(er.invalidVoiceId);await el();let a={id:e.savedVoice.voiceId,gender:"Female",provider:"minimax",name:e.savedVoice.name};W(a),ep()}catch(e){console.error(er.cloneError,e)}finally{B(!1)}}},ep=()=>{J(null),G.current&&(G.current.value="")},eu=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),r=new MediaRecorder(e),t=[];r.ondataavailable=e=>{e.data.size>0&&t.push(e.data)},r.onstop=()=>{let e=new Blob(t,{type:"audio/wav"}),r=new File([e],`recording-${Date.now()}.wav`,{type:"audio/wav"});J(r)},r.start(),Y(r),X(!0)}catch(e){console.error(et.error,e)}};return D?(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(b.j,{}),(0,a.jsx)("main",{className:"container mx-auto px-4 py-4 md:py-8 space-y-4 md:space-y-8",children:(0,a.jsxs)(d.Zp,{className:"backdrop-blur-sm bg-background/80 border-primary/10 shadow-lg",children:[(0,a.jsx)(d.aR,{className:"border-b border-primary/10 pb-4 md:pb-6",children:(0,a.jsx)(d.ZB,{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent text-center",children:e("voiceCloning")})}),(0,a.jsx)(d.Wu,{className:"pt-4 md:pt-6",children:(0,a.jsxs)("div",{className:"space-y-4 md:space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)(d.Zp,{className:"backdrop-blur-sm bg-background/80 border-primary/10 shadow-md",children:[(0,a.jsx)(d.aR,{className:"space-y-1 md:space-y-2",children:(0,a.jsx)(d.ZB,{className:"text-lg md:text-xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:e("uploadAudio")})}),(0,a.jsx)(d.Wu,{className:"space-y-3 md:space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)(w.Q,{children:(0,a.jsxs)(s.$,{variant:"outline",onClick:()=>G.current?.click(),disabled:Q||O,className:"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 text-white hover:from-blue-600 hover:via-purple-600 hover:to-pink-600 h-10",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 mr-2"}),e("uploadAudio")]})}),(0,a.jsx)(w.Q,{children:(0,a.jsx)(s.$,{variant:"outline",onClick:O?()=>{H&&O&&(H.stop(),H.stream.getTracks().forEach(e=>e.stop()),X(!1),Y(null))}:eu,disabled:Q,className:(0,R.cn)("bg-gradient-to-r text-white h-10",O?"from-red-500 to-red-600 hover:from-red-600 hover:to-red-700":"from-blue-500 via-purple-500 to-pink-500 hover:from-blue-600 hover:via-purple-600 hover:to-pink-600"),children:O?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2"}),e("stopRecording")]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m,{className:"w-4 h-4 mr-2"}),e("record")]})})})]}),$&&(0,a.jsx)("div",{className:"text-sm text-gray-500 bg-muted/30 p-2 rounded-lg",children:e("fileSelected",{filename:$.name,size:($.size/1024/1024).toFixed(2)})}),(0,a.jsx)("input",{type:"file",ref:G,className:"hidden",accept:"audio/*",onChange:ec}),(0,a.jsx)(s.$,{className:"w-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 h-10 text-white hover:from-blue-600 hover:via-purple-600 hover:to-pink-600",onClick:ed,disabled:!$||Q||O,children:Q?e("cloning"):e("startCloning")}),T&&(0,a.jsx)("div",{className:"p-2 bg-muted/30 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm",children:[e("voiceId"),T.id]}),(0,a.jsx)(s.$,{variant:"ghost",size:"sm",onClick:()=>{localStorage.removeItem("clonedVoiceId"),W(null)},className:"text-red-500 hover:text-red-600",children:e("clear")})]})})]})})]}),(0,a.jsxs)(d.Zp,{className:"backdrop-blur-sm bg-background/80 border-primary/10 shadow-md",children:[(0,a.jsx)(d.aR,{className:"space-y-1 md:space-y-2",children:(0,a.jsx)(d.ZB,{className:"text-lg md:text-xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:e("instructions")})}),(0,a.jsx)(d.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,a.jsx)("p",{children:e("instruction1")}),(0,a.jsx)("p",{children:e("instruction2")}),(0,a.jsx)("p",{children:e("instruction3")}),(0,a.jsx)("p",{children:e("instruction4")}),(0,a.jsx)("p",{children:e("instruction5")}),(0,a.jsx)("p",{children:e("instruction6")}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-primary/10",children:(0,a.jsx)("p",{className:"text-xs text-red-500",children:e("legalNotice")})})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)(d.Zp,{className:"backdrop-blur-sm bg-background/80 border-primary/10 shadow-md",children:[(0,a.jsx)(d.aR,{className:"space-y-1 md:space-y-2",children:(0,a.jsx)(d.ZB,{className:"text-lg md:text-xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:e("serviceSettings")})}),(0,a.jsx)(d.Wu,{className:"space-y-3 md:space-y-4",children:(0,a.jsxs)("div",{className:"space-y-3 md:space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,a.jsx)(l.J,{children:e("selectLanguage")}),(0,a.jsxs)(n.l6,{value:V,onValueChange:e=>{q(e),M.trackEvent("change_language","settings",e)},children:[(0,a.jsx)(n.bq,{className:"h-10",children:(0,a.jsx)(n.yv,{})}),(0,a.jsx)(n.gC,{className:"max-h-[40vh] overflow-y-auto",children:P.map(r=>(0,a.jsx)(n.eb,{value:r.code,children:e(r.nameKey)},r.code))})]})]}),(0,a.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,a.jsx)(l.J,{children:e("voice")}),V&&(0,a.jsx)(k.E,{languageCode:V,onVoiceSelect:W,selectedVoiceId:T?.id,provider:"minimax"})]}),(0,a.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,a.jsxs)(l.J,{children:[e("speed"),": ",z,"x"]}),(0,a.jsx)(c.A,{value:[z],min:.5,max:2,step:.1,className:"py-1"})]})]})})]}),(0,a.jsxs)(d.Zp,{className:"backdrop-blur-sm bg-background/80 border-primary/10 shadow-md",children:[(0,a.jsx)(d.aR,{className:"space-y-1 md:space-y-2",children:(0,a.jsx)(d.ZB,{className:"text-lg md:text-xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:e("readText")})}),(0,a.jsxs)(d.Wu,{className:"space-y-3 md:space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.T,{placeholder:e("inputPlaceholder"),className:"min-h-[120px] md:min-h-[200px] bg-background/70 backdrop-blur-sm border-primary/20 focus:border-primary/40 transition-all duration-300 resize-none text-sm md:text-base",value:r,maxLength:A.minimax}),(0,a.jsxs)("div",{className:"absolute bottom-2 right-2 text-xs text-muted-foreground",children:[r.length,"/",A.minimax.toLocaleString()," ",e("characters")]})]}),_&&(0,a.jsx)(j.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:"w-full",children:(0,a.jsx)(f.t,{audioContext:_.audioContext,audioSource:_.source,onPause:eo,onResume:en,isPlaying:F})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(w.Q,{children:(0,a.jsxs)(s.$,{onClick:ea,className:"flex-1 h-10 text-sm bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 hover:from-blue-600 hover:via-purple-600 hover:to-pink-600 transition-all duration-300",children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),e("readText")]})}),_&&(0,a.jsx)(j.P.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},children:(0,a.jsx)(w.Q,{children:(0,a.jsx)(s.$,{variant:"outline",size:"icon",onClick:F?eo:en,className:"h-10 w-10 border-primary/20 hover:border-primary/40",children:F?(0,a.jsx)(x.A,{className:"h-4 w-4"}):(0,a.jsx)(g.A,{className:"h-4 w-4"})})})}),(0,a.jsx)(w.Q,{children:(0,a.jsxs)(s.$,{variant:"outline",onClick:ei,className:"flex-1 h-10 text-sm border-primary/20 hover:border-primary/40 hover:bg-primary/5",children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"}),e("downloadAudio")]})}),(0,a.jsx)(w.Q,{children:(0,a.jsx)(s.$,{variant:"outline",className:"flex-1 h-10 text-sm border-primary/20 hover:border-primary/40 hover:bg-primary/5",asChild:!0,children:(0,a.jsxs)("label",{children:[(0,a.jsx)(p.A,{className:"mr-2 h-4 w-4"}),e("uploadFile"),(0,a.jsx)("input",{type:"file",className:"hidden",accept:".txt,.md",onChange:es})]})})})]})]})]})]})]})})]})})]}):null}},94735:e=>{"use strict";e.exports=require("events")},98898:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(57605).A)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[395,863,771,727,490,317,956,830,690],()=>t(74476));module.exports=a})();