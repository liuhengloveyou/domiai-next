(()=>{var e={};e.id=347,e.ids=[347],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7863:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>s,dynamic:()=>i,metadata:()=>t});let i="force-dynamic",t={title:"AI Voice Cloning - Professional Voice Replication & Customization Service",description:"Clone and customize your voice using advanced AI technology. Support for multiple languages including English, Chinese, Japanese, and Korean. Features real-time preview and personalization options. Perfect for voiceovers, education, and podcasting.",metadataBase:new URL("https://voicecanvas.org"),icons:{icon:"/favicon.ico",shortcut:"/favicon.ico",apple:"/apple-touch-icon.png",other:{rel:"apple-touch-icon-precomposed",url:"/apple-touch-icon-precomposed.png"}},keywords:"voice cloning, AI voiceover, voice synthesis, voice customization, multilingual voiceover, personalized voice, professional voiceover, voice customization service",openGraph:{title:"AI Voice Cloning - Professional Voice Replication & Customization Service",description:"Clone and customize your voice using advanced AI technology. Support for multiple languages including English, Chinese, Japanese, and Korean. Features real-time preview and personalization options.",url:"https://voicecanvas.org/cloning",siteName:"VoiceCanvas",locale:"en_US",type:"website",images:[{url:"https://voicecanvas.org/images/cloning-og.png",width:1200,height:630,alt:"VoiceCanvas Cloning Interface",type:"image/png"}]},twitter:{title:"AI Voice Cloning - Professional Voice Replication & Customization",description:"Clone and customize your voice using advanced AI technology. Supports multiple languages with personalization options and real-time preview.",card:"summary_large_image",images:{url:"/images/cloning-twitter.png",alt:"VoiceCanvas Cloning Interface",width:1200,height:630},creator:"@VoiceCanvas",site:"@VoiceCanvas"},other:{"og:image:secure_url":"https://voicecanvas.org/images/cloning-og.png","pinterest-rich-pin":"true","fb:app_id":"","article:author":"https://voicecanvas.org","article:publisher":"https://voicecanvas.org"}};function s({children:e}){return e}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},17724:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>i});let i=(0,a(40356).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\domiai\\\\domiai-next\\\\app\\\\cloning\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\domiai\\domiai-next\\app\\cloning\\page.tsx","default")},18844:(e,r,a)=>{"use strict";var i=a(82896);a.o(i,"usePathname")&&a.d(r,{usePathname:function(){return i.usePathname}}),a.o(i,"useRouter")&&a.d(r,{useRouter:function(){return i.useRouter}}),a.o(i,"useSearchParams")&&a.d(r,{useSearchParams:function(){return i.useSearchParams}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68571:(e,r,a)=>{Promise.resolve().then(a.bind(a,17724))},74476:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>c});var i=a(97448),t=a(81303),s=a(23375),o=a.n(s),n=a(37440),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);a.d(r,l);let c={children:["",{children:["cloning",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,17724)),"D:\\domiai\\domiai-next\\app\\cloning\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,7863)),"D:\\domiai\\domiai-next\\app\\cloning\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,90996))).default(e),async e=>(await Promise.resolve().then(a.bind(a,52511))).default(e),async e=>(await Promise.resolve().then(a.bind(a,74921))).default(e)],apple:[async e=>(await Promise.resolve().then(a.bind(a,45914))).default(e)],openGraph:[],twitter:[],manifest:"/manifest.json"}}]},{layout:[()=>Promise.resolve().then(a.bind(a,49510)),"D:\\domiai\\domiai-next\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,26166)),"D:\\domiai\\domiai-next\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,37056,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,12433,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,90996))).default(e),async e=>(await Promise.resolve().then(a.bind(a,52511))).default(e),async e=>(await Promise.resolve().then(a.bind(a,74921))).default(e)],apple:[async e=>(await Promise.resolve().then(a.bind(a,45914))).default(e)],openGraph:[],twitter:[],manifest:"/manifest.json"}}]}.children,d=["D:\\domiai\\domiai-next\\app\\cloning\\page.tsx"],p={require:a,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/cloning/page",pathname:"/cloning",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},79187:(e,r,a)=>{Promise.resolve().then(a.bind(a,82921))},79551:e=>{"use strict";e.exports=require("url")},82921:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>V});var i=a(60554),t=a(60563),s=a(71726),o=a(65656),n=a(40446),l=a(45789),c=a(97110),d=a(70400),p=a(57480),u=a(98898);let m=(0,a(57605).A)("mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);var h=a(63436),x=a(10187),g=a(26099),v=a(4273),y=a(79169),f=a(37784),b=a(29203),j=a(63490),w=a(43283),N=a(58805),C=a(13989),k=a(86244),R=a(83481),P=a(18844),S=a(25862);let E=[{code:"zh-CN",nameKey:"chinese"},{code:"en-US",nameKey:"english"},{code:"ja-JP",nameKey:"japanese"},{code:"ko-KR",nameKey:"korean"},{code:"es-ES",nameKey:"spanish"},{code:"fr-FR",nameKey:"french"},{code:"ru-RU",nameKey:"russian"},{code:"it-IT",nameKey:"italian"},{code:"pt-PT",nameKey:"portuguese"},{code:"de-DE",nameKey:"german"},{code:"vi-VN",nameKey:"vietnamese"},{code:"uk-UA",nameKey:"ukrainian"},{code:"tr-TR",nameKey:"turkish"},{code:"id-ID",nameKey:"indonesian"},{code:"ar-SA",nameKey:"arabic"}],A={minimax:1e4};function V(){let{t:e}=(0,y.o)(),[r,a]=(0,t.useState)(""),[V,z]=(0,t.useState)("zh-CN"),[D]=(0,t.useState)(1),[I,_]=(0,t.useState)(!1),[F]=(0,t.useState)(null),[K,U]=(0,t.useState)(!1),{data:T}=(0,N.wV)(),[q,W]=(0,t.useState)(null),[Z,L]=(0,t.useState)(!1),M=(0,C.s)(),[$,J]=(0,t.useState)(null),[Q,B]=(0,t.useState)(!1),G=(0,t.useRef)(null),[O,X]=(0,t.useState)(!1),[H,Y]=(0,t.useState)(null),ee=(0,P.useRouter)(),er={uploadAudioFirst:e("uploadAudioFirst"),audioUploadRequirements:e("audioUploadRequirements"),loginRequired:e("loginRequired"),loginForCloning:e("loginForCloning"),fetchUserDataError:e("fetchUserDataError"),insufficientCloneCredits:e("insufficientCloneCredits"),buyMoreCredits:e("buyMoreCredits"),startCloningTitle:e("startCloningTitle"),startCloningDesc:e("startCloningDesc"),cloneVoiceFailed:e("cloneVoiceFailed"),invalidVoiceId:e("invalidVoiceId"),cloneSuccess:e("cloneSuccess"),cloneReadyToUse:e("cloneReadyToUse"),cloneError:e("cloneError"),unknownError:e("unknownError"),invalidResponse:e("invalidResponse")||"Invalid response from server"},ea={...er,error:e("error"),fetchCloneVoicesError:e("fetchCloneVoicesError"),deleteSuccess:e("deleteSuccess"),cloneVoiceDeleted:e("cloneVoiceDeleted"),deleteCloneVoiceError:e("deleteCloneVoiceError"),recordingComplete:e("recordingComplete"),recordingSaved:(r,a)=>e("recordingSaved",{filename:r,size:a}),startRecordingTitle:e("startRecordingTitle"),startRecordingDesc:e("startRecordingDesc"),microphoneAccessError:e("microphoneAccessError"),clonedVoice:e("clonedVoice")},ei=async()=>{if(!Z)try{L(!0)}catch(r){console.error(e("speechSynthesisError"),r),(0,S.oR)(r instanceof Error?r.message:e("speechError"))}finally{L(!1)}},et=async()=>{try{if(!r)return void(0,S.oR)(e("pleaseEnterText"));if(!q)return void(0,S.oR)(e("selectVoiceFirst"));if(!T?.user)return}catch(r){console.error(e("downloadError"),r)}},es=async e=>{let r=e.target.files?.[0];if(r)try{if("text/plain"===r.type||r.name.endsWith(".txt")||r.name.endsWith(".md")){let e=new FileReader;e.onload=e=>{let r=e.target?.result;a(r)},e.readAsText(r)}else"application/pdf"===r.type||r.type.includes("word")||r.name.endsWith(".doc")||r.name.endsWith(".docx")||r.name.endsWith(".rtf")}catch(e){console.error("File upload error:",e)}},eo=()=>{F&&(F.audioContext.suspend(),U(!1))},en=()=>{F&&(F.audioContext.resume(),U(!0))},el=async r=>{let a=r.target.files?.[0];if(a)try{if(!a.type.startsWith("audio/")||a.size>0x1400000)return;let r=new Audio,i=await new Promise((i,t)=>{r.onloadedmetadata=()=>i(r.duration),r.onerror=()=>t(Error(e("audioDurationError"))),r.src=URL.createObjectURL(a)});if(i<10||i>300)return void URL.revokeObjectURL(r.src);J(a),URL.revokeObjectURL(r.src)}catch(r){console.error(e("uploadError"),r)}},ec=async()=>{try{let e=await fetch("/api/voice/cloned-voices");if(401===e.status||404===e.status)return;let r=await e.json();Array.isArray(r)}catch(e){}},ed=async()=>{if($){if(!T?.user)return void ee.push("/auth/login");try{let e=await fetch("/api/user/plan");if(!e.ok)throw Error(er.fetchUserDataError);let r=await e.json();if(!r.cloneQuota||r.cloneQuota.remaining_clones<=0)return void ee.push("/pricing?type=clone")}catch(e){console.error(er.fetchUserDataError,e);return}try{let e;B(!0);let r=new FormData;r.append("audio",$);let a=await fetch("/api/voice/clone",{method:"POST",body:r});if(!a.ok){let e=er.cloneVoiceFailed;try{let r=a.headers.get("content-type");if(r&&r.includes("application/json")){let r=await a.json();r.error&&(e=r.error)}else{let e=await a.text();console.error("非JSON错误响应:",e.substring(0,200)+"...")}}catch(e){console.error("解析错误响应失败:",e)}throw Error(e)}try{e=await a.json()}catch(e){throw console.error("解析JSON响应失败:",e),Error(er.invalidResponse)}if(!e.voiceId)throw Error(er.invalidVoiceId);await ec();let i={id:e.savedVoice.voiceId,gender:"Female",provider:"minimax",name:e.savedVoice.name};W(i),ep()}catch(e){console.error(er.cloneError,e)}finally{B(!1)}}},ep=()=>{J(null),G.current&&(G.current.value="")},eu=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),r=new MediaRecorder(e),a=[];r.ondataavailable=e=>{e.data.size>0&&a.push(e.data)},r.onstop=()=>{let e=new Blob(a,{type:"audio/wav"}),r=new File([e],`recording-${Date.now()}.wav`,{type:"audio/wav"});J(r)},r.start(),Y(r),X(!0)}catch(e){console.error(ea.error,e)}};return I?(0,i.jsxs)("div",{className:"min-h-screen",children:[(0,i.jsx)(b.j,{}),(0,i.jsx)("main",{className:"container mx-auto px-4 py-4 md:py-8 space-y-4 md:space-y-8",children:(0,i.jsxs)(d.Zp,{className:"backdrop-blur-sm bg-background/80 border-primary/10 shadow-lg",children:[(0,i.jsx)(d.aR,{className:"border-b border-primary/10 pb-4 md:pb-6",children:(0,i.jsx)(d.ZB,{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent text-center",children:e("voiceCloning")})}),(0,i.jsx)(d.Wu,{className:"pt-4 md:pt-6",children:(0,i.jsxs)("div",{className:"space-y-4 md:space-y-8",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)(d.Zp,{className:"backdrop-blur-sm bg-background/80 border-primary/10 shadow-md",children:[(0,i.jsx)(d.aR,{className:"space-y-1 md:space-y-2",children:(0,i.jsx)(d.ZB,{className:"text-lg md:text-xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:e("uploadAudio")})}),(0,i.jsx)(d.Wu,{className:"space-y-3 md:space-y-4",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsx)(w.Q,{children:(0,i.jsxs)(s.$,{variant:"outline",onClick:()=>G.current?.click(),disabled:Q||O,className:"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 text-white hover:from-blue-600 hover:via-purple-600 hover:to-pink-600 h-10",children:[(0,i.jsx)(p.A,{className:"w-4 h-4 mr-2"}),e("uploadAudio")]})}),(0,i.jsx)(w.Q,{children:(0,i.jsx)(s.$,{variant:"outline",onClick:O?()=>{H&&O&&(H.stop(),H.stream.getTracks().forEach(e=>e.stop()),X(!1),Y(null))}:eu,disabled:Q,className:(0,R.cn)("bg-gradient-to-r text-white h-10",O?"from-red-500 to-red-600 hover:from-red-600 hover:to-red-700":"from-blue-500 via-purple-500 to-pink-500 hover:from-blue-600 hover:via-purple-600 hover:to-pink-600"),children:O?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.A,{className:"w-4 h-4 mr-2"}),e("stopRecording")]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m,{className:"w-4 h-4 mr-2"}),e("record")]})})})]}),$&&(0,i.jsx)("div",{className:"text-sm text-gray-500 bg-muted/30 p-2 rounded-lg",children:e("fileSelected",{filename:$.name,size:($.size/1024/1024).toFixed(2)})}),(0,i.jsx)("input",{type:"file",ref:G,className:"hidden",accept:"audio/*",onChange:el}),(0,i.jsx)(s.$,{className:"w-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 h-10 text-white hover:from-blue-600 hover:via-purple-600 hover:to-pink-600",onClick:ed,disabled:!$||Q||O,children:Q?e("cloning"):e("startCloning")}),q&&(0,i.jsx)("div",{className:"p-2 bg-muted/30 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("p",{className:"text-sm",children:[e("voiceId"),q.id]}),(0,i.jsx)(s.$,{variant:"ghost",size:"sm",onClick:()=>{localStorage.removeItem("clonedVoiceId"),W(null)},className:"text-red-500 hover:text-red-600",children:e("clear")})]})})]})})]}),(0,i.jsxs)(d.Zp,{className:"backdrop-blur-sm bg-background/80 border-primary/10 shadow-md",children:[(0,i.jsx)(d.aR,{className:"space-y-1 md:space-y-2",children:(0,i.jsx)(d.ZB,{className:"text-lg md:text-xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:e("instructions")})}),(0,i.jsx)(d.Wu,{children:(0,i.jsxs)("div",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,i.jsx)("p",{children:e("instruction1")}),(0,i.jsx)("p",{children:e("instruction2")}),(0,i.jsx)("p",{children:e("instruction3")}),(0,i.jsx)("p",{children:e("instruction4")}),(0,i.jsx)("p",{children:e("instruction5")}),(0,i.jsx)("p",{children:e("instruction6")}),(0,i.jsx)("div",{className:"mt-4 pt-4 border-t border-primary/10",children:(0,i.jsx)("p",{className:"text-xs text-red-500",children:e("legalNotice")})})]})})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)(d.Zp,{className:"backdrop-blur-sm bg-background/80 border-primary/10 shadow-md",children:[(0,i.jsx)(d.aR,{className:"space-y-1 md:space-y-2",children:(0,i.jsx)(d.ZB,{className:"text-lg md:text-xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:e("serviceSettings")})}),(0,i.jsx)(d.Wu,{className:"space-y-3 md:space-y-4",children:(0,i.jsxs)("div",{className:"space-y-3 md:space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,i.jsx)(c.J,{children:e("selectLanguage")}),(0,i.jsxs)(n.l6,{value:V,onValueChange:e=>{z(e),M.trackEvent("change_language","settings",e)},children:[(0,i.jsx)(n.bq,{className:"h-10",children:(0,i.jsx)(n.yv,{})}),(0,i.jsx)(n.gC,{className:"max-h-[40vh] overflow-y-auto",children:E.map(r=>(0,i.jsx)(n.eb,{value:r.code,children:e(r.nameKey)},r.code))})]})]}),(0,i.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,i.jsx)(c.J,{children:e("voice")}),V&&(0,i.jsx)(k.E,{languageCode:V,onVoiceSelect:W,selectedVoiceId:q?.id,provider:"minimax"})]}),(0,i.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,i.jsxs)(c.J,{children:[e("speed"),": ",D,"x"]}),(0,i.jsx)(l.A,{value:[D],min:.5,max:2,step:.1,className:"py-1"})]})]})})]}),(0,i.jsxs)(d.Zp,{className:"backdrop-blur-sm bg-background/80 border-primary/10 shadow-md",children:[(0,i.jsx)(d.aR,{className:"space-y-1 md:space-y-2",children:(0,i.jsx)(d.ZB,{className:"text-lg md:text-xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:e("readText")})}),(0,i.jsxs)(d.Wu,{className:"space-y-3 md:space-y-4",children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(o.T,{placeholder:e("inputPlaceholder"),className:"min-h-[120px] md:min-h-[200px] bg-background/70 backdrop-blur-sm border-primary/20 focus:border-primary/40 transition-all duration-300 resize-none text-sm md:text-base",value:r,maxLength:A.minimax}),(0,i.jsxs)("div",{className:"absolute bottom-2 right-2 text-xs text-muted-foreground",children:[r.length,"/",A.minimax.toLocaleString()," ",e("characters")]})]}),F&&(0,i.jsx)(j.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:"w-full",children:(0,i.jsx)(f.t,{audioContext:F.audioContext,audioSource:F.source,onPause:eo,onResume:en,isPlaying:K})}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,i.jsx)(w.Q,{children:(0,i.jsxs)(s.$,{onClick:ei,className:"flex-1 h-10 text-sm bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 hover:from-blue-600 hover:via-purple-600 hover:to-pink-600 transition-all duration-300",children:[(0,i.jsx)(h.A,{className:"mr-2 h-4 w-4"}),e("readText")]})}),F&&(0,i.jsx)(j.P.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},children:(0,i.jsx)(w.Q,{children:(0,i.jsx)(s.$,{variant:"outline",size:"icon",onClick:K?eo:en,className:"h-10 w-10 border-primary/20 hover:border-primary/40",children:K?(0,i.jsx)(x.A,{className:"h-4 w-4"}):(0,i.jsx)(g.A,{className:"h-4 w-4"})})})}),(0,i.jsx)(w.Q,{children:(0,i.jsxs)(s.$,{variant:"outline",onClick:et,className:"flex-1 h-10 text-sm border-primary/20 hover:border-primary/40 hover:bg-primary/5",children:[(0,i.jsx)(v.A,{className:"mr-2 h-4 w-4"}),e("downloadAudio")]})}),(0,i.jsx)(w.Q,{children:(0,i.jsx)(s.$,{variant:"outline",className:"flex-1 h-10 text-sm border-primary/20 hover:border-primary/40 hover:bg-primary/5",asChild:!0,children:(0,i.jsxs)("label",{children:[(0,i.jsx)(p.A,{className:"mr-2 h-4 w-4"}),e("uploadFile"),(0,i.jsx)("input",{type:"file",className:"hidden",accept:".txt,.md",onChange:es})]})})})]})]})]})]})]})})]})})]}):null}},98898:(e,r,a)=>{"use strict";a.d(r,{A:()=>i});let i=(0,a(57605).A)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])}};var r=require("../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),i=r.X(0,[395,145,771,997,490,317,967,830,690],()=>a(74476));module.exports=i})();